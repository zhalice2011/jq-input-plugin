<html xmlns="http://www.w3.org/1999/xhtml" class=" js no-mobile desktop no-ie ff ff56 m-section admin-section student-section w-1920 gt-240 gt-320 gt-480 gt-640 gt-768 gt-800 gt-1024 gt-1280 gt-1440 gt-1680 no-portrait landscape gradient rgba opacity textshadow multiplebgs boxshadow borderimage borderradius no-cssreflections csstransforms csstransitions no-touch no-retina fontface domloaded" id="dispatch-page">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="/scripts/all.compatible.js?v=2018122401"></script>
    <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no">
    <meta name="format-detection" content="address=no;">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>
        派单
    </title>

    <!-- css -->
    <link rel="apple-touch-icon-precomposed" href="/images/h5/Icon@2x.png">
    <link rel="apple-touch-startup-image" href="/images/h5/Icon@2x.png">
    <link rel="stylesheet" href="/css/m/ucenter.css?v=2015110801">
    <!-- css end-->



    <script src="/scripts/template.js" type="text/javascript"></script>
    <script src="/scripts/pagermobile.js" type="text/javascript"></script>
    <script type="text/javascript" src="/scripts/m/window.js?v=2015102301"></script>

    <script type="text/javascript" src="./jquery.mypop.js"></script>
    <link rel="stylesheet" href="./jquery.myPop.css">

    <!-- js end -->
    <style type="text/css">
        #RadioButtonListTraceStatus ul li {
            float: left;
            padding-left: 2px;
            padding-right: 2px;
            margin-bottom: 8px;
            list-style: none;
            white-space: nowrap;
        }
    </style>

    <script type="text/javascript" src="/scripts/ui.datepicker-zh-CN.js?v=2017031901"></script>
    <script type="text/javascript" src="/scripts/jquery-ui-1.10.4.custom.min.js?v=2017031901"></script>
    <link href="/css/ui-lightness/jquery-ui-1.10.4.custom.css?v=2018101601" rel="stylesheet" type="text/css">
    <link href="/css/m/all.css?v=2018122501" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="/scripts/head.min.js?v=2016121901"></script>
    <link rel="shortcut icon" href="/favicon.ico?v=2016053001">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <script type="text/javascript" src="/scripts/common_discuz.js?v=2018092901"></script>
    <script type="text/javascript" src="/scripts/common_extra.js?v=2018092901"></script>
    <script type="text/javascript" src="/scripts/iscroll-lite.js"></script>
    <script type="text/javascript" src="/scripts/navbarscroll.js"></script>
    <script type="text/javascript" src="/scripts/jquery.autocomplete.common.js?v=2017041501"></script>
</head>
<script type="text/javascript" id="useragent-switcher">navigator.__defineGetter__("userAgent", function() {return "Mozilla/5.0 (Windows NT 10.0; WOW64; rv:56.0) Gecko/20100101 Firefox/56.0"})</script>
<body>

    <form name="form1" method="post" action="./dispatch.aspx?code=S038371&amp;cityId=888" id="form1">
        <div>
            <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMjA3NDUxMzY0NQ9kFgQCAQ9kFhJmD2QWAgICD2QWCAIBDxYCHgdWaXNpYmxlaGQCAw8WAh8AZ2QCBQ9kFgJmDxYCHwBoZAIGDxYCHwBoZAIDD2QWAmYPDxYCHgRUZXh0BQVkZW1vMWRkAgQPDxYCHglNYXhMZW5ndGgCZBYCHhBkYXRhLXBsYWNlaG9sZGVyBQblpIfms6hkAgUPDxYCHwICChYCHwMFBuaVmeW4iGQCBg8PFgIfAgIKFgYeB29ua2V5dXAFM3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKC9bXjAxMjM0NTY3ODkuXS9nLCcnKR4Mb25hZnRlcnBhc3RlBTN0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZSgvW14wMTIzNDU2Nzg5Ll0vZywnJykfAwUJ5L+h5oGv6LS5ZAIHDw8WAh8CAgpkZAIIDxAPFgYeDkRhdGFWYWx1ZUZpZWxkBQZJdGVtSWQeDURhdGFUZXh0RmllbGQFCEl0ZW1OYW1lHgtfIURhdGFCb3VuZGdkEBUHCemAmuefpeS6hgzogZTns7vlrrbplb8M5a2m5ZGY5ZCm5YazDOaVmeWRmOWQpuWGswzor5XmlZnmiJDlip8G5oiQ5Y2VBuWkh+mAiRUHATEBMgEzATQBNQE2ATcUKwMHZ2dnZ2dnZ2RkAgkPEA8WBh8GBQZJdGVtSWQfBwUISXRlbU5hbWUfCGdkEBUDDOe9keermeWMuemFjRLlrablkZjpooTnuqbogIHluIgS6ICB5biI6aKE57qm5a2m5ZGYFQMBMwExATIUKwMDZ2dnZGQCDg9kFgICAQ9kFgQCAw8WAh8AaGQCBg9kFgQCAQ8WAh8AaGQCAw8WAh8AaGQCAg9kFgQCAg8WAh8AaGQCBA8WAh8AaGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgQFHkNoZWNrQm94Tm90aWZ5UGFyZW50QW5kVGVhY2hlcgUiQ2hlY2tCb3hOb3RpZnlUZWFjaGVyVG9UcnlUZWFjaGluZwUVQ2hlY2tCb3hDb250YWN0U2hhcmVkBRlDaGVja0JveFN0YXRJblN1Y2Nlc3NSYXRlYKxY9yeYFKlLbGFfO9ofXVkz9ev32XYeyZVs3kpMPyk=">
        </div>

        <div>

            <input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="BD590059">
            <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdABZbeWwb0TZPrTNg/NM6HCuDd2VcOGoYw9do57sqQr0oN/Cddmaxr3pd0nIV06AF52YTEGTtFKr3hQMvF5HDnMS4KhybMLNsyQ2NSuNP8/I2OCg1Gm8MMkUdgnUQ0mJ8WvH+fcgRX9OUNbAflpUFJ5HZ2rzxydWEgV8MqPwU2pDxDNS2E16qLVTR4rz6Q0NxnCZrRSFP4Ulpak5PBJ/smfw0jfh/rPmGj5wa98oakilea0ZICl5qPWbyBfv1UXfFvGeg1cdrBmS178pcLTL4PEo7hHe2mqEYdGQo2nSk8NUU1bwtCGEouBnR+PEF+LmEgmZ7Bi1NjT1F2I8H/Vrkict7K4DVlJC4GTWT9B8yDQPD9938gf7JJ7zd9VoPd4bH67CCmNmH1w5kL9fXkJkJ/q9SlgJxmG/9Q8XuPWkSzJdI4lX73wIxwippB2gvAgSRX1rwHIDWnPOSbzZQSInxHttCpNxoY/sneHWCXc8rSdw0MZRRc6fVB3uII1w3Taawoso=">
        </div>

        <div class="body_div">


            <!-- BODY HEADER -->


            <div id="append_parent"></div>
            <div id="ajaxwaitid" class="center-in-center" style="padding: 50px; background: rgb(95, 97, 100) none repeat scroll 0% 0%; display: none;">请稍候...</div>
            <div id="divTip"></div>



            <div class="header">
                <div style="width:100%;">
                    <a class="logo_a" href="http://demo.lovejiajiao.com/m/default?cityId=888" target="_self"><img src="/logo//defaultlogoh5.png?v=2016050501" alt="" title="" width="100%"></a>
                    <a class="city_a" href="/m/selectcity?cityId=888" onclick="return clickSelectCityLink(this);" target="_self"><div class="city f14">演州</div><div class="city_ch body_bg"></div></a>


                    <div class="floatright">
                        <a class="mylogin linktouch" href="/m/my?cityId=888" rel="nofollow" target="_self">我的</a>
                    </div>

                </div>
            </div>






            <div class="blank1"></div>



            <script id="tTrace" type="text/html">
                <div class="blocktitle" style="padding-right:0px;">
                    <div class="floatleft">已派老师数量：{{recordCount}}</div>
                    <div class="floatright"><input class="smallbutton" type="button" value="增加派单" id="button1" onclick="showAddTrace('0');" /></div>
                </div>
                <div class="blank8"></div>
                <div {{if recordCount!=null}} class="listwrapper" {{/if}}>
                    {{each list as record i}}
                    <div class="listunit" style="background-color:{{record.backgroundColor}};overflow:hidden;">
                        <div class="uppperpart">
                            <div class="floatleft">
                                <a href="/m/admin/teacher/matchlist?code={{record.TeacherCode}}" class="linkgray">
                                    <div><img src="{{record.urlOfTeacherPhoto}}" width="95px" height="95px" /></div>
                                    {{record.TeacherName}}<br />{{record.TeacherCode}}
                                </a>
                            </div>
                            <div class="floatright">
                                <div>状态：{{record.ResultName}}</div>
                                <div>信息费：<span class="cred">{{record.Amount}}元</span></div>
                                <div>试教时间：{{record.TryTeachingDate}}</div>
                                <div>派单时间：{{record.CreatedOn}}</div>
                                {{if true == record.tryingReminded}}<div>已通知老师去试教</div>{{/if}}
                            </div>
                        </div>
                        <div class="blank8"></div>
                        <div class="belowpart">
                            {{if ''!=record.Memo}}<div>备注：<span class="cred">{{record.Memo}}</span></div>{{/if}}
                            <div class="alignright"><input class="smallbutton" type="button" value="修改" style="width:100px;" onclick="showAddTrace('{{record.Id}}');" /></div>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </script>

            <script id="tTrace2" type="text/html">

                <div class="blocktitle" style="padding-right:0px;">
                    <div class="floatleft"><span class="fb">预约此单的老师数量：</span>{{appointmentTeacherCount}}</div>
                </div>
                <div class="blank8"></div>

                <div {{if appointmentTeacherCount!=0}} class="listwrapper" {{/if}}>
                    {{each AppointmentList as record i}}
                    <div class="listunit" style="overflow:hidden;">
                        <div class="floatleft">
                            <a href="/m/admin/teacher/contact?code={{record.teacherCode}}" class="linkgray">
                                <div><img src="{{record.urlOfTeacherPhoto}}" width="95px" height="95px" /></div>
                                <span class="fb">
                                    {{record.teacherName}}
                                    {{record.teacherCode}}
                                </span>
                                {{record.message}}
                            </a>

                        </div>
                        <div class="cgray floatright">
                            <div>{{record.createdOn}}</div>
                            <div> 成单次数：{{record.totalSuccessCount}}</div>
                            <div> 派单次数：{{record.totalTraceCount}}</div>
                            <div>
                                <span id="spanCheckBoxShowServiceCharge{{record.id}}" class="singleCheckBox">
                                    <span notext="1">
                                        <input id="checkbox{{record.id}}" type="checkbox"
                                               {{if 2==record.status}} checked='true' {{/if}} onclick="markProcessed(this,{{record.id}});" />
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </script>

            <!-- BODY HERDER END -->
            <!-- BODY TAG -->
            <div class="dl_nav">
                <span>
                    <a target="_self" href="/m/default?cityId=888">首页</a>
                    <font class="body_bg"></font>
                    <a target="_self" href="/m/my?cityId=888">
                        我的
                    </a>
                    <font class="body_bg"></font>
                    <a target="_self" href="javascript:;">
                        派单
                    </a>
                </span>
            </div>  <!-- BODY TAG END -->
            <!-- BODY -->
            <!-- ucenter -->
            <div class="hide">
                <input name="TextBoxStudentCode" type="text" id="TextBoxStudentCode" class="highinput f18" style="width:100px;vertical-align:middle;">
            </div>

            <div class="blank8"></div>

            <script src="/scripts/nav.js?v=2018061401" type="text/javascript"></script>
            <link href="/css/tab.css?v=2017101501" rel="stylesheet" type="text/css">
            <div class="wrappernav" id="wrappernav" style="touch-action: pan-y;">
                <div class="scroller" style="transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; transform: translate(0px, 0px) translateZ(0px); width: 512px;">
                    <ul>
                        <li id="type1" style="margin-left: 0px; margin-right: 0px;"><a target="_self" href="/m/admin/student/makeorder?id=39115&amp;cityId=888">做单</a></li>
                        <li id="Li2" style="margin-left: 0px; margin-right: 0px;" class="cur"><a target="_self" href="/m/admin/student/dispatch?code=S038371&amp;cityId=888">派单</a></li>
                        <li id="Li1" style="margin-left: 0px; margin-right: 0px;"><a target="_self" href="/m/admin/student/management?code=S038371&amp;cityId=888">管理</a></li>
                        <li id="LiMatch" style="margin-left: 0px; margin-right: 0px;"><a target="_self" href="/m/admin/student/match?code=S038371&amp;cityId=888">匹配与推送</a></li>
                        <li id="Li3" style="margin-left: 0px; margin-right: 0px;"><a target="_self" href="/m/admin/student/copy?code=S038371&amp;cityId=888">复制信息</a></li>
                        <li style="margin-left: 0px; margin-right: 0px;"><a target="_self" href="/m/admin/student/copyrtf?code=S038371&amp;cityId=888">高级复制</a></li>
                        <li style="margin-left: 0px; margin-right: 0px;"><a target="_self" href="/m/admin/student/lessonrecord?code=S038371&amp;cityId=888">上课记录</a></li>
                        <li style="margin-left: 0px; margin-right: 0px;"><a target="_self" href="/m/admin/student/bill?code=S038371&amp;cityId=888">学费账单</a></li>
                    </ul>
                </div>
            </div>

            <div class="main1box"></div>

            <script type="text/javascript" language="javascript">
     processNav();
            </script>




            <div class="wuly_post rsm_create">
                <span>客服：</span>
                <span id="LabelCustomer">demo1</span>
                <span class="vblank16"></span>
            </div>



            <div class="ucenter">
                <div class="blank8"></div>
                <div id="content"></div>
                <div>
                    <div id="traceblock">
                        <div class="blocktitle" style="padding-right:0px;">
                            <div class="floatleft">已派老师数量：3</div>
                            <div class="floatright"><input class="smallbutton" type="button" value="增加派单" id="button1" onclick="showAddTrace('0');"></div>
                        </div>
                        <div class="blank8"></div>
                        <div class="listwrapper">

                            <div class="listunit" style="background-color:;overflow:hidden;">
                                <div class="uppperpart">
                                    <div class="floatleft">
                                        <a href="/m/admin/teacher/matchlist?code=T085435" class="linkgray">
                                            <div><img src="http://demo.lovejiajiao.com/photos/T085435thumbnail@2x.jpg" width="95px" height="95px"></div>
                                            侧身<br>T085435
                                        </a>
                                    </div>
                                    <div class="floatright">
                                        <div>状态：联系家长</div>
                                        <div>信息费：<span class="cred">0元</span></div>
                                        <div>试教时间：2018-11-28</div>
                                        <div>派单时间：11月27日 11:30</div>
                                        <div>已通知老师去试教</div>
                                    </div>
                                </div>
                                <div class="blank8"></div>
                                <div class="belowpart">
                                    <div>备注：<span class="cred">这是一个输入值，可能是要关注的</span></div>
                                    <div class="alignright"><input class="smallbutton" type="button" value="修改" style="width:100px;" onclick="showAddTrace('31932');"></div>
                                </div>
                            </div>

                            <div class="listunit" style="background-color:;overflow:hidden;">
                                <div class="uppperpart">
                                    <div class="floatleft">
                                        <a href="/m/admin/teacher/matchlist?code=T007000" class="linkgray">
                                            <div><img src="http://demo.lovejiajiao.com/images/defaultphoto_male@2x.png?v=2018052301" width="95px" height="95px"></div>
                                            张三峰<br>T007000
                                        </a>
                                    </div>
                                    <div class="floatright">
                                        <div>状态：联系家长</div>
                                        <div>信息费：<span class="cred">0元</span></div>
                                        <div>试教时间：</div>
                                        <div>派单时间：11月27日 11:19</div>

                                    </div>
                                </div>
                                <div class="blank8"></div>
                                <div class="belowpart">

                                    <div class="alignright"><input class="smallbutton" type="button" value="修改" style="width:100px;" onclick="showAddTrace('31931');"></div>
                                </div>
                            </div>

                            <div class="listunit" style="background-color:#c9e39c;overflow:hidden;">
                                <div class="uppperpart">
                                    <div class="floatleft">
                                        <a href="/m/admin/teacher/matchlist?code=T017381" class="linkgray">
                                            <div><img src="http://demo.lovejiajiao.com/photos/T017381thumbnail@2x.webp" width="95px" height="95px"></div>
                                            张三<br>T017381
                                        </a>
                                    </div>
                                    <div class="floatright">
                                        <div>状态：成单</div>
                                        <div>信息费：<span class="cred">1元</span></div>
                                        <div>试教时间：</div>
                                        <div>派单时间：11月27日 11:14</div>

                                    </div>
                                </div>
                                <div class="blank8"></div>
                                <div class="belowpart">

                                    <div class="alignright"><input class="smallbutton" type="button" value="修改" style="width:100px;" onclick="showAddTrace('31930');"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


                <div class="blank16"></div>
                <div class="blank16"></div>


                <div id="orderDiv" class="hide">
                    <div class="blank8"></div>
                    <span class="positionitem commonlight" style="cursor:pointer" onclick="orderBySuccessCount(this);">按成单数排序<img src="../../../images/order.png" style="vertical-align:middle"></span>
                    <span class="vblank16"></span>
                    <span style="cursor:pointer" onclick="orderByTime(this);">按预约时间排序<img src="../../../images/order.png" style="vertical-align:middle"></span>
                </div>

                <div class="blank16"></div>
                <div>
                    <div id="traceblock2">
                        <div class="blocktitle" style="padding-right:0px;">
                            <div class="floatleft"><span class="fb">预约此单的老师数量：</span>0</div>
                        </div>
                        <div class="blank8"></div>

                        <div>

                        </div>
                    </div>
                </div>

                <div id="divTraceEdit" style="position:absolute;background-color:#e5e5e5;display: none;z-index:1000; border:0px solid green;padding:10px;overflow:auto;">
                    <table cellspacing="0" cellpadding="0">
                        <tbody>
                            <tr>
                                <td colspan="1" style="vertical-align:top;">
                                    <div>
                                        <div class="floatleft"><span id="addOrEditDispatch">增加派单</span></div>
                                        <div class="floatright" onclick="hideAddTrace();">关闭</div>
                                    </div>
                                    <div class="blank8"></div>
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align:top;">
                                    <div class="wuly_post rsm_create_new">
                                        <ul class="ulwrapnew">
                                            <li>
                                                <div class="rc_td">
                                                    <div class="form-item"><input name="TextBoxMemo" type="text" maxlength="100" id="TextBoxMemo" class="inp_txt c_i input-text" data-effect="2" data-placeholder="备注"><label class="input-label" for="TextBoxMemo" style="top: 8px; left: 5px;">备注</label></div>
                                                </div>
                                            </li>

                                            <li>
                                                <div class="rc_th">
                                                    <span>教师</span><i id="I2">*</i>
                                                </div>
                                                <div class="rc_td">
                                                    <input name="TextBoxTeacherCode" type="text" maxlength="10" id="TextBoxTeacherCode" class="inp_txt c_i ac_input" data-placeholder="教师" autocomplete="off">
                                                </div>
                                            </li>

                                            <li>
                                                <div class="rc_th">
                                                    <span>信息费</span>
                                                </div>
                                                <div class="rc_td">
                                                    <input name="TextBoxAmount" maxlength="10" id="TextBoxAmount" class="inp_txt c_i" type="tel" onkeyup="this.value=this.value.replace(/[^0123456789.]/g,'')" onafterpaste="this.value=this.value.replace(/[^0123456789.]/g,'')" data-placeholder="信息费">
                                                </div>
                                            </li>
                                            <li>
                                                <div class="rc_th">
                                                    <span>试教时间</span>
                                                </div>
                                                <div class="rc_td">
                                                    <div class="form-item"><input name="TextBoxTryTeachingDate" maxlength="10" readonly="readonly" id="TextBoxTryTeachingDate" class="inp_txt c_i input-text hasDatepicker" type="date"><label class="input-label" for="TextBoxTryTeachingDate" style="top: 8px; left: 5px;"></label></div>
                                                </div>
                                            </li>

                                            <li>
                                                <div class="rc_th">
                                                    <span>跟单状态</span><i id="I5">*</i>
                                                </div>
                                                <div class="rc_td" style="flex-direction:column;">
                                                    <div class="rc_go c_i">
                                                        <span id="RadioButtonListTraceStatus" class="radiolist"><ul class="ul_radiobuttonlist clearfix"><li id="myli0" onclick="setSelectedRadioButtonListIndex('RadioButtonListTraceStatus',0,'')"><input id="RadioButtonListTraceStatus_0" type="radio" name="RadioButtonListTraceStatus" value="1"><span>通知了</span></li><li id="myli1" onclick="setSelectedRadioButtonListIndex('RadioButtonListTraceStatus',1,'')"><input id="RadioButtonListTraceStatus_1" type="radio" name="RadioButtonListTraceStatus" value="2"><span>联系家长</span></li><li id="myli2" onclick="setSelectedRadioButtonListIndex('RadioButtonListTraceStatus',2,'')"><input id="RadioButtonListTraceStatus_2" type="radio" name="RadioButtonListTraceStatus" value="3"><span>学员否决</span></li><li id="myli3" onclick="setSelectedRadioButtonListIndex('RadioButtonListTraceStatus',3,'')"><input id="RadioButtonListTraceStatus_3" type="radio" name="RadioButtonListTraceStatus" value="4"><span>教员否决</span></li><li id="myli4" onclick="setSelectedRadioButtonListIndex('RadioButtonListTraceStatus',4,'')"><input id="RadioButtonListTraceStatus_4" type="radio" name="RadioButtonListTraceStatus" value="5"><span>试教成功</span></li><li id="myli5" onclick="setSelectedRadioButtonListIndex('RadioButtonListTraceStatus',5,'')"><input id="RadioButtonListTraceStatus_5" type="radio" name="RadioButtonListTraceStatus" value="6"><span>成单</span></li><li id="myli6" onclick="setSelectedRadioButtonListIndex('RadioButtonListTraceStatus',6,'')"><input id="RadioButtonListTraceStatus_6" type="radio" name="RadioButtonListTraceStatus" value="7"><span>备选</span></li></ul></span>
                                                    </div>
                                                    <div class="blank1"></div>
                                                    <div>
                                                        <span class="cgray">(若选择试教成功，记得跟单。当成单后，再改状态为成单，这样老师的成单数会增加，便于网站吸引更多用户)</span>
                                                    </div>
                                                </div>
                                            </li>



                                            <li>
                                                <div class="rc_th">
                                                    <span>匹配类型</span><i>*</i>
                                                </div>
                                                <div class="rc_td">
                                                    <span id="RadioButtonListMatchType" class="radiolist"><ul class="ul_radiobuttonlist clearfix"><li id="myli0" onclick="setSelectedRadioButtonListIndex('RadioButtonListMatchType',0,'')"><input id="RadioButtonListMatchType_0" type="radio" name="RadioButtonListMatchType" value="3"><span>网站匹配</span></li><li id="myli1" onclick="setSelectedRadioButtonListIndex('RadioButtonListMatchType',1,'')"><input id="RadioButtonListMatchType_1" type="radio" name="RadioButtonListMatchType" value="1"><span>学员预约老师</span></li><li id="myli2" onclick="setSelectedRadioButtonListIndex('RadioButtonListMatchType',2,'')"><input id="RadioButtonListMatchType_2" type="radio" name="RadioButtonListMatchType" value="2"><span>老师预约学员</span></li></ul></span>
                                                </div>
                                            </li>

                                            <li id="liCheckBoxNotifyParentAndTeacher">
                                                <div class="rc_th" style="width:unset;">
                                                    <span>通知家长和老师已派单</span>
                                                    <span class="vblank4"></span>
                                                </div>
                                                <div class="rc_td" style="width:unset;">

                                                    <ul class="ul_swicthbuttonlist" id="spanCheckBoxNotifyParentAndTeacher"><li id="myli0" onclick="setSelectedSwitch('spanCheckBoxNotifyParentAndTeacher',0);this.children[0].click()" class="normal"><input id="CheckBoxNotifyParentAndTeacher" type="checkbox" name="CheckBoxNotifyParentAndTeacher"></li></ul>
                                                </div>
                                            </li>

                                            <li id="liNotifyParentAndTeacherTip" class="hide">
                                                <div class="rc_th" style="width:unset;">
                                                    <span>已选择通知家长和老师</span>
                                                </div>
                                            </li>


                                            <li id="liCheckBoxNotifyTeacherToTryTeaching">
                                                <div class="rc_th" style="width:unset;">
                                                    <span>提前一天通知老师试教</span>
                                                    <span class="vblank4"></span>
                                                </div>
                                                <div class="rc_td" style="width:unset;">

                                                    <ul class="ul_swicthbuttonlist" id="spanCheckBoxNotifyTeacherToTryTeaching"><li id="myli0" onclick="setSelectedSwitch('spanCheckBoxNotifyTeacherToTryTeaching',0);this.children[0].click()" class="normal"><input id="CheckBoxNotifyTeacherToTryTeaching" type="checkbox" name="CheckBoxNotifyTeacherToTryTeaching" onclick="NotifyTeacherToTryTeaching();"></li></ul>
                                                </div>
                                            </li>

                                            <li id="liNotifyTeacherToTryTeachingTip" class="hide">
                                                <div class="rc_th" style="width:0">
                                                </div>
                                                <div class="tc_rd">
                                                    <span id="lastRemindTryTeachingTip"></span>
                                                </div>
                                            </li>

                                            <li>
                                                <div class="rc_th" style="width:unset;">
                                                    <span>
                                                        联系方式已给老师
                                                    </span>
                                                    <span class="vblank4"></span>
                                                </div>
                                                <div class="rc_td" style="width:unset;">

                                                    <ul class="ul_swicthbuttonlist" id="spanCheckBoxContactShared"><li id="myli0" onclick="setSelectedSwitch('spanCheckBoxContactShared',0);this.children[0].click()" class="normal"><input id="CheckBoxContactShared" type="checkbox" name="CheckBoxContactShared"></li></ul>
                                                </div>
                                            </li>

                                            <li class="hide">
                                                <div class="rc_th" style="width:unset;">
                                                    <span>
                                                        纳入成单率统计
                                                    </span>
                                                </div>
                                                <div class="rc_td">

                                                    <ul class="ul_swicthbuttonlist" id="spanCheckBoxStatInSuccessRate"><li id="myli0" onclick="setSelectedSwitch('spanCheckBoxStatInSuccessRate',0);this.children[0].click()" class="select"><input id="CheckBoxStatInSuccessRate" type="checkbox" name="CheckBoxStatInSuccessRate" checked="checked"></li></ul>
                                                </div>
                                            </li>

                                        </ul>
                                    </div>


                                    <div class="sav_btn">
                                        <input type="button" id="buttonAddTrace" value="提交" onclick="addTrace();" style="width:80px;" class="smallbutton">
                                        <input type="button" value="取消" onclick="hideAddTrace();" style="width:80px;background-color:#ccc;color:#757575;" class="smallbutton">

                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="blank16"></div>
                    <div class="blank16"></div>
                </div>

                <div class="tcdPageCode"></div>

                <!-- //ucenter -->	 <!-- BODY END-->
                <!-- FOOTER -->
                <!-- FOOTER -->

                <div class="blank8"></div>
                <div class="blank8"></div>
                <div class="blank8"></div>
                <div class="blank8"></div>


                <div class="footer">
                    <div class="blank8"></div>
                    <p class="footer_02">演州爱家教网：demo.lovejiajiao.com&nbsp;&nbsp;&nbsp;&nbsp;</p>
                    <p class="footer_03">
                        <a href="http://demo.lovejiajiao.com?cityId=888" target="_self">电脑版</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://demo.lovejiajiao.com/m/download?cityId=888" target="_self">App&nbsp;下载</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://demo.lovejiajiao.com/m/about?cityId=888" target="_self">关于</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://demo.lovejiajiao.com/m/contactus?cityId=888" target="_self">联系我们</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="https://www.lovejiajiao.com/m/union?cityId=888" target="_self">代理加盟</a>
                    </p>


                    <p class="footer_03">
                        11111111Copyright (c) 2009_2018
                    </p>


                    <p class="footer_03">
                        <a href="/m/preference?cityId=888" target="_self"><img src="/images/global/flags/zh-cn.png"><span class="vblank8"></span>语言设置</a>
                    </p>



                    <div class="blank8"></div>
                    <div class="blank8"></div>
                    <div class="blank8"></div>
                    <div class="blank8"></div>
                    <div class="blank8"></div>
                    <div class="blank8"></div>
                    <div class="blank8"></div>
                    <div class="blank8"></div>



                    <ul class="userpeo">
                        <li>

                        </li>
                        <li>
                            <table style="width:100%;height:100%;" cellspacing="0px">
                                <tbody>
                                    <tr>
                                        <td><a href="/m/download?cityId=888" target="_self"><i class="a8">App</i></a></td>
                                        <td style="background-color:#e5e5e5;width:1px;"></td>
                                        <td>


                                            <i class="a7">15059630308</i>


                                        </td>


                                        <td class="miniProgram" style="background-color:#e5e5e5;width:1px;"></td>
                                        <td class="miniProgram"><a target="_blank" href="https://wpa.qq.com/msgrd?v=3&amp;uin=11111112222&amp;site=demo.lovejiajiao.com&amp;menu=yes&amp;cityId=888"><img src="https://pub.idqqimg.com/qconn/wpa/button/button_11.gif" style="border-width:0px;"></a></td>


                                        <td style="background-color:#e5e5e5;width:1px;"></td>
                                        <td><a href="/m/MakeAnAppointmentWithTeacher?from=footer&amp;cityId=888" target="_blank">请家教</a></td>


                                        <td style="background-color:#e5e5e5;width:1px;"></td>
                                        <td><a href="/window/CustomerWeChat?cityId=888" id="customerwechat" onclick="showCustomerWeChatWindow(this) ;return false;" target="_blank">客服微信</a></td>




                                        <td class="showInMiniProgram hide" style="background-color:#e5e5e5;width:1px;"></td>
                                        <td class="showInMiniProgram hide" style="line-height:100%;" onclick="history.back();"><img src="/images/back.png"></td>

                                    </tr>
                                </tbody>
                            </table>
                        </li>
                    </ul>



                </div>
                <!-- FOOTER END -->
                <!-- FOOTER END -->
            </div>
        </div>

        <script language="javascript">baiduMapAk = 'o5n3YznLKlEE4HOuejedMVvH';discuzCommonJavascript='/scripts/common_discuz.js?v=2018092901'</script>
        <script language="javascript">gGlobalTextCopied = '已复制';</script>
    </form>




    <script language="javascript" type="text/javascript">

    var traceData ;
    var traceId ;
    $(document).ready(function () {
        initCommonPageScriptAll({});

        //getTraceData(1);

        //decorateAllRadioButtonList() ;
        //decorateAllCheckBox() ;

        initAutoComplete() ;

        initDateInput() ;

        $('.input-text').myPop(
            {
                inputClass:'form_input'
                ,labelClass:'form_label'
            });
    }
);

      function initDateInput()
    {
        var enableDateInput = parseBoolean('True');
        if(enableDateInput)
        {
            initAddDate() ;
        }
    }

    function initAddDate() {
        $("#TextBoxTryTeachingDate").datepicker
            (
            {
            changeMonth: true,
            changeYear: true,
            yearRange: '-50:+5',
            showButtonPanel: true,
            numberOfMonths: 2
            ,onSelect: function(dateText, inst)
            {
                TryTeachingDateFilled() ;
            }
            }
        );
    }

    function TryTeachingDateFilled()
    {
        setSwitchState("spanCheckBoxNotifyTeacherToTryTeaching", true);
    }

    function NotifyTeacherToTryTeaching(){
        var tryTeachingDate = $('#TextBoxTryTeachingDate').val();
        if("" == tryTeachingDate){
            var tip = '请输入试教时间';
            alert(tip);
            setSwitchState("spanCheckBoxNotifyTeacherToTryTeaching", true);
        }
    }

/*auto complate*/
  function initAutoComplete()
   {
        teacherNameComplete();
   }

 function teacherNameComplete()
    {
     $("#TextBoxTeacherCode").autocomplete(null, {
		minChars: 1,
		matchCase:false,//不区分大小写
		autoFill: false,
		max: 10,
		urlparaname:'teachername',
		url:'/ajax/TeacherName.aspx',
		formatItem: function(row, i, max,term) {
		    //return row.name + " (" + row.code+")";
		    return row.format ;
		},
		formatMatch: function(row, i, max) {
			//return row.name ;//+ " (" + row.code+")";
			return row.name + " (" + row.code+")";
		},
		formatResult: function(row) {
			return row.code;
		},
		onSelected: function(t,input) {
		    //$('#TextBoxTeacherCode').val(t.code) ;
            input.val(t.code) ;
		},
		reasultSearch:function(row,v)//本场数据自定义查询语法 注意这是我自己新加的事件
		{
			if(row.data.code.indexOf(v) == 0 || row.data.spell.indexOf(v) == 0)
			{
				return row;
			}
			else
				return false;
		}
	});

}

/*auto complate ends*/


    function renderTraceData(data) {
        traceData = data ;

        var html = template('tTrace', data);
        document.getElementById('traceblock').innerHTML = html;

        if(null != data.AppointmentList){
            var html = template('tTrace2', data);
            document.getElementById('traceblock2').innerHTML = html;

            if(data.appointmentTeacherCount >1){
                $('#orderDiv').removeClass("hide");
            }

            decorateSingleCheckBox();
        }


    }


    function getTraceData(pageIndex) {
         showloading('block','加载中...');
        var studentCode = QueryString('code');
        $.post("/http/trace",
        { command: 'getlist'
            ,owner:'2'
            ,studentCode: studentCode
            ,pageIndex:pageIndex
            ,pageSize: 10
            ,getAppointmentList:true
        },
        function (data) {
            if ("" != data) {
                showloading('none');
                var json = eval('(' + data + ')');
                //$('#appointTeacherCount').text(json.appointmentTeacherCount);
                renderTraceData(json);
            }
            else {
                //$("#matchblock").html("");
            }



        });
    }

    function orderBySuccessCount(ctrl){
        orderClass(ctrl);
        var studentCode = QueryString('code');
        $.post("/http/trace",
        { command: 'orderBySuccessCount'
            ,owner:'2'
            ,studentCode: studentCode
        },
        function (data) {
            if ("" != data) {
                var json = eval('(' + data + ')');
                var html = template('tTrace2', json);
                document.getElementById('traceblock2').innerHTML = html;
                decorateSingleCheckBox();
            }
        })
    }

    function orderByTime(ctrl){
        orderClass(ctrl);
            var studentCode = QueryString('code');
            $.post("/http/trace",
            { command: 'ordertime'
                ,owner:'2'
                ,studentCode: studentCode
            },
            function (data) {
                if ("" != data) {
                    var json = eval('(' + data + ')');
                    var html = template('tTrace2', json);
                    document.getElementById('traceblock2').innerHTML = html;
                    decorateSingleCheckBox();
                }
            });
    }

            /* trace*/
            var submitting = "提交中";
            var addTraceButtonOldText;
            var addTraceButtonId = "buttonAddTrace" ;

            function showAddTraceSubmitting()
            {
                addTraceButtonOldText = $('#'+addTraceButtonId).val();
                $('#'+addTraceButtonId).attr("disabled", true);
                $('#'+addTraceButtonId).val(submitting);
            }

            function showUIOnAddTraceDone()
            {
                $('#'+addTraceButtonId).removeAttr("disabled") ;
                $('#'+addTraceButtonId).removeClass("ac_loading");
                $('#'+addTraceButtonId).val(addTraceButtonOldText);
            }

            function setAddOrEdit(id)
            {
                var tip = "" ;
                if("0"==id)
                {
                    tip = "增加派单" ;

                    $("#TextBoxTeacherCode").removeAttr("disabled") ;
                }
                else{
                    tip = "修改派单" ;

                    $("#TextBoxTeacherCode").attr("disabled","disabled") ;
                }

                $("#addOrEditDispatch").text(tip) ;
            }

            function showAddTrace(id) {
                traceId = id ;

                setAddOrEdit(id) ;

                cleanForm() ;

                var menuId = 'divTraceEdit';
                var screenHeight = document.documentElement.clientHeight;
                showMenu({ 'menuid': menuId, 'pos': '00','duration': 3,'fade':1,'cover':1,'drag':1,'maxh':screenHeight});

                adjustWidth($('#RadioButtonListTraceStatus')[0]);

                fillForm(id);

                $('.input-text').myPop(
                    {
                        inputClass:'form_input'
                        ,labelClass:'form_label'
                    });

            }


            function cleanForm()
            {
                $('#TextBoxTeacherCode').val("");
                $('#TextBoxTryTeachingDate').val("");
                $('#TextBoxAmount').val("");
                $('#TextBoxMemo').val("");


                setRadioButtonListSelected($("#RadioButtonListMatchType"),3) ;

                setRadioButtonListSelected($("#RadioButtonListTraceStatus"),2) ;

                setSwitchState("spanCheckBoxContactShared", false);
                setSwitchState("spanCheckBoxNotifyParentAndTeacher", false);
                //setSwitchState("spanCheckBoxStatInSuccessRate", false);
                setSwitchState("spanCheckBoxNotifyTeacherToTryTeaching", false);

                //notify order created
                $('#liNotifyParentAndTeacherTip').addClass('hide');
                $('#liCheckBoxNotifyParentAndTeacher').removeClass('hide');

                //try teaching
                $('#liNotifyTeacherToTryTeachingTip').addClass('hide');
                $('#liCheckBoxNotifyTeacherToTryTeaching').removeClass('hide');

            }


            function fillForm(id)
            {
                $('#TextBoxMemo').val(id);
            }



            function hideAddTrace() {
                var menuId = 'divTraceEdit';
                hideMenu(menuId) ;
            }

            function checkAddTrace()
            {
                var tip;
                var teacherCode;
                var resultId ;

                teacherCode = $('#TextBoxTeacherCode').val();

                var ctrl = $('#RadioButtonListTraceStatus');
                resultId = getSelectedRadioButtonListValue(ctrl.get(0));

                if ("" == teacherCode)
                {
                    tip = "请输入老师";
                    alert(tip);
                    return false;
                }
                else if (!resultId)
                {
                    tip = "请选择跟单进度";
                    alert(tip);
                    return false;
                }

                return true ;
            }

            function addTrace()
            {
            if (checkAddTrace())
            {

            var command ;
            var teacherCode;
            var studentCode ;
            var tryTeachingDate ;
            var memo ;
            var resultId ;
            var matchTypeId ;

            var contactShared;
            var statInSuccessRate;
            var notifyParentAndTeacher;
            var notifyTeacherToTryTeaching;

            command =  "add";
            teacherCode = $('#TextBoxTeacherCode').val();
            studentCode = QueryString("code") ;
            amount = $('#TextBoxAmount').val();
            tryTeachingDate = $('#TextBoxTryTeachingDate').val();
            memo = $('#TextBoxMemo').val();

            var ctrl = $('#RadioButtonListTraceStatus');
            resultId = getSelectedRadioButtonListValue(ctrl.get(0));

            var ctrl = $('#RadioButtonListMatchType');
            matchTypeId = getSelectedRadioButtonListValue(ctrl.get(0));

            contactShared = $('#CheckBoxContactShared')[0].checked ;
            statInSuccessRate = $('#CheckBoxStatInSuccessRate')[0].checked ;
            notifyParentAndTeacher = $('#CheckBoxNotifyParentAndTeacher')[0].checked ;
            notifyTeacherToTryTeaching = $('#CheckBoxNotifyTeacherToTryTeaching')[0].checked ;
            showAddTraceSubmitting() ;

            $.post("/http/trace",
                { command: 'add'
                    ,traceId:traceId
                    ,owner:'2'
                    ,teacherCode: teacherCode
                    ,studentCode:studentCode
                    ,tryTeachingDate: tryTeachingDate
                    ,amount:amount
                    ,memo:memo
                    ,resultId:resultId
                    ,matchTypeId:matchTypeId
                    ,contactShared:contactShared
                    ,statInSuccessRate:statInSuccessRate
                    ,notifyParentAndTeacher:notifyParentAndTeacher
                    ,notifyTeacherToTryTeaching:notifyTeacherToTryTeaching
                },
                function (data) {
                    onAddTraceReturn(traceId,data);
                }

            );

            return false;
        }
        else {
            return false;
        }
    }

        function cleanTraceForm()
        {
            $('#TextBoxTeacherCode').val("") ;
        }

        function onAddTraceReturn(id,data)
        {
            showUIOnAddTraceDone() ;
            var json = eval('(' + data + ')');
            if ("0" != json.resultId) {
                alert(json.resultDesc);
            }
            else
            {
                if("0"!=id)
                {
                    cleanTraceForm() ;
                }


                hideAddTrace() ;
                if ("" != data) {
                        var json = eval('(' + data + ')');
                        renderTraceData(json);
                    }
                showPrompt('tip_' + Math.random(), null, json.resultDesc, 2000);
            }
        }

            /*trace end*/

        /*refresh*/
         function onClickButtonRefresh(ctrl) {
                var tip = "确定要刷新此单吗";
                if(confirm(tip))
                {
                    var oldText = $(ctrl).val() ;
                    $(ctrl).val(submitting) ;
                    $(ctrl).attr("disabled", true);
                    var studentCode = QueryString('code');
                    $.post("/ajax/studentorder",
                    { command: 'refresh',
                        pStudentCode: studentCode
                    },
                    function (data) {
                        if ("" != data) {

                            $(ctrl).removeAttr("disabled") ;
                            $(ctrl).val(oldText) ;

                            var json = eval('(' + data + ')');
                            alert(json.resultDesc) ;
                        }
                        else {
                        }
                    }

                );
               }
            }
        /*refresh ends*/

        /*change order status*/
        function changeOrderStatus(ctrl) {
                 var result = getSelectedRadioButtonListValue(ctrl);
                 //alert(result);
                 var targetStatus = 7;
                 //alert(targetStatus);
                 var jqueryObj = $("#changeStatusReasonDiv");
                 if (targetStatus == result)
                 {
                    jqueryObj.show();
                    jqueryObj.display();
                 }
                 else{
                     jqueryObj.hide();
                 }
            }





//push starts
function checkPush(obj, userId,bAuto)
    {
        var studentCode = QueryString('code');
        var id = $(obj).attr('id');
        var checked = $(obj)[0].checked ;
        $.post("/ajax/matchteacher",
                {
                    command: 'push', pStudentCode: studentCode, pUserId: userId, pIfPush: checked
                },
                function (data) {
                    if ("" != data) {
                        var json = eval('(' + data + ')');
                        if ("0" != json.resultId) //error
                        {
                            alert(json.resultDesc)
                            if (checked) {
                                $(obj).attr("checked", false);
                            }
                        }
                        else {
                            alert(json.resultDesc)
                            onOneCheckBoxClicked();
                        }

                    }
                    else {
                        onOneCheckBoxClicked();
                    }
                }

            );
            }

            function onOneCheckBoxClicked() {
                var allChecked = true;
                var allCheckBox = $('#matchblock .pushcheck');
                for (var i = 0; i < allCheckBox.length; i++)
                {
                    if (false == $(allCheckBox[i])[0].checked)
                    {
                        allChecked = false;
                        break;
                    }
                }

                if (allChecked) {
                    $('#CheckboxAll').checked=true ;
                }
                else {
                    $('#CheckboxAll').checked = false ;
                }

            }

            function checkAllPush(obj)
            {
                var allCheckBox = $('#matchblock .pushcheck');
                //alert(allCheckBox.length);
                var checked = $(obj)[0].checked;
                for (var i = 0; i < allCheckBox.length; i++)
                {
                    var oneCheckBox = allCheckBox[i];
                    var disabled = $(oneCheckBox).attr("disabled");
                    //alert(disbaled);
                    if (null==disabled||false == disabled)
                    {
                        if (true == checked)
                        {
                            $(oneCheckBox)[0].checked = true ;
                        }
                        else
                        {
                            $(oneCheckBox)[0].checked = false ;
                        }
                    }
                }
            }


            function checkAllPushSubmit(obj) {
                var allCheckBox = $('#matchblock .pushcheck');
                var checked = $(obj)[0].checked;
                for (var i = 0; i < allCheckBox.length; i++)
                {
                    var oneCheckBox = allCheckBox[i];
                    var disabled = $(oneCheckBox).attr("disabled");
                    if (null==disabled||false == disabled)
                    {
                        var userId = $(oneCheckBox).attr("userId");
                        checkPush(oneCheckBox, userId, true);
                    }
                    else
                    {

                    }
                }

            }

//push ends

            function markProcessed(ctrl,appointmentIdToStudent)
            {
                var processed = $(ctrl).prop("checked");
                processed = !processed;
                //alert(appointmentIdToStudent) ;
                //return ;
                $.post("/http/admin/AppointmentToStudent",
                        {
                            command: 'processappointment'
                            ,appointmentIdToStudent:appointmentIdToStudent
                            ,processed: processed
                        },
                        function (data)
                        {
                            var json = eval('(' + data + ')');
                            //alert(json.resultDesc);
                            //showPrompt($(ctrl).attr("id"), null, json.resultDesc, 2000);
                            showPrompt('tip_'+ Math.random(), null, json.resultDesc, 2000);
                        }
                    );
            }

            function orderClass(crtl){
                var divs = $("#orderDiv span");
                for (var i = 0; i < divs.length; i++){
                        $(divs[i]).removeClass('positionitem commonlight');
                        $(crtl).addClass('positionitem commonlight');
                    }

            }

    </script>


    <div id="gotoTop" class="common_icon" style="display: none;"><em>顶部</em></div><div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>
</body>
</html>
